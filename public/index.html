<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>بازی جاسوس</title>
</head>
<body>
  <h1>اتاق بازی</h1>
  <input type="text" id="room-id" placeholder="کد اتاق" />
  <button onclick="createRoom()">ساخت اتاق (داور)</button>
  <button onclick="joinRoom()">ورود بازیکن</button>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    let myAnimal = "";

    function createRoom() {
      const roomId = prompt("کد اتاق وارد کن:");
      const count = parseInt(prompt("تعداد بازیکن؟"));
      socket.emit("create-room", { roomId, playerCount: count });
      alert("اتاق ساخته شد");
    }

    function joinRoom() {
      const roomId = document.getElementById("room-id").value;
      socket.emit("join-room", { roomId });

      socket.on("joined-room", ({ animal }) => {
        myAnimal = animal;
        localStorage.setItem("animal", animal);
        localStorage.setItem("roomId", roomId);
        window.location.href = "game.html";
      });

      socket.on("receive-code", ({ code }) => {
        const div = document.getElementById("game");
        div.innerHTML += `<p>کد شما: ${code}</p>`;
      });
    }
  </script>
</body>
</html>
